<div class="sui-search-box__autocomplete-container">
  <div>
    {{#if (bool @autocompleteSuggestions)}}
      {{#each (entries @autocompletedSuggestions) as |autocompleteSuggestion|}}
        {{#let (object-at 1 autocompleteSuggestion) as |suggestions|}}
          {{#let
            (get-suggestion-title
              (object-at 0 autocompleteSuggestion) suggestions
            ) as |suggestionTitle|
          }}
            {{#if (and suggestionTitle (gt suggestions 0))}}
              <div class="sui-search-box__section-title">
                {{suggestionTitle}}
              </div>
            {{/if}}
            {{#if (gt suggestions 0)}}
              <ul class="sui-search-box__suggestion-list">
                {{#each suggestions as |suggestion|}}
                  <li>
                    {{#if suggestion.highlight}}
                      {{{suggestion.highlight}}}
                    {{else}}
                      <span>
                        {{suggestion.suggestion}}
                      </span>
                    {{/if}}
                  </li>
                {{/each}}
              </ul>
            {{/if}}
          {{/let}}
        {{/let}}
      {{/each}}
    {{/if}}
    {{#if
      (and
        (bool @autocompleteResults)
        (bool @autocompletedResults)
        (gt @autocompletedResults.length 0)
        @autocompleteResults.sectionTitle
      )
    }}
      <div class="sui-search-box__section_title">
        {{@autocompletedResults.sectionTitle}}
      </div>
    {{/if}}
    {{#if
      (and
        (bool @autocompleteResults)
        (bool @autocompletedResults)
        (gt @autocompletedResults.length 0)
      )
    }}
      <ul class="sui-search-box__results-list">
        {{#each @autocompletedResults as |result|}}
          {{#let
            (get-snippet result @autocompleteResults.titleField)
            (get-raw
              result @autocompleteResults.titleField
            ) as |titleSnippet titleRaw|
          }}
            <li>
              {{#if titleSnippet}}
                <span>
                  {{{titleSnippet}}}
                </span>
              {{else}}
                <span>
                  {{titleRaw}}
                </span>
              {{/if}}
            </li>
          {{/let}}
        {{/each}}
      </ul>
    {{/if}}
  </div>
</div>